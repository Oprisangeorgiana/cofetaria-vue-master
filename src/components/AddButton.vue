<template>
    <div>
        <div>
            <p class="btn btn-primary" @click="addToCart">
                Adaugă în coș
            </p>
        </div>

    </div>
</template>

<script>


  import cartMutations from 'pages/public/cart/store/mutations'
  import cartGetters from 'pages/public/cart/store/getters'

  export default {
    //  ================================================================================
    //  ========================   GLOBAL AWARENESS   ==================================
    //  ================================================================================
    name: 'app-button',
    parent: {},
    //  ================================================================================
    //  ========================   CUSTOM MIDDLEWARE   =================================
    //  ================================================================================
    layout: 'PublicPortal',
    //  ================================================================================
    //  ==========================   DEPENDENCIES   ====================================
    //  ================================================================================
    components: {},
    directives: {},
    filters: {},
    //  ================================================================================
    //  ===========================   COMPOSITION   ====================================
    //  ================================================================================
    mixins: [],
    extends: {},
    //  ================================================================================
    //  ========================   COMPONENT INTERFACE   ===============================
    //  ================================================================================
    inheritAttrs: {},
    model: {},
    props: {
      isActive: Boolean,
      product: Object,

    },
    //  ================================================================================
    //  ============================   LOCAL STATE   ===================================
    //  ================================================================================
    data: function () {
      return {}
    },
    computed: {
    },
    //  ================================================================================
    //  ==============================   EVENTS   ======================================
    //  ================================================================================
    watch: {},
    mounted: function () {

    },
    //  ================================================================================
    //  ========================   NON-REACTIVE PROPERTIES   ===========================
    //  ================================================================================
    methods: {

      addToCart: function () {
        const cartProductsDictionary = _.cloneDeep(this.$store.getters[cartGetters.GET_CART_PRODUCTS_DICTIONARY])

        if (this.product.id in cartProductsDictionary) {
          cartProductsDictionary[this.product.id].quantity++
        }
        else {
          cartProductsDictionary[this.product.id] = {
            product:this.product,
            quantity:1
          }
        }
        this.$store.commit(cartMutations.SET_CART_PRODUCTS_DICTIONARY, cartProductsDictionary)
      },

    },
    //  ================================================================================
    //  ==========================   CUSTOM PROPERTIES   ===============================
    //  ================================================================================
    metaInfo () {
      return {}
    }

  }
</script>

<style>

</style>
